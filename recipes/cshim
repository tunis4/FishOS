name=cshim
version=4e36d01a03244f560b44a9b13c16d911bea59fed
revision=1
tarball_url="https://github.com/managarm/cshim/archive/${version}.tar.gz"
tarball_blake2b="e619960ac3390a2ec83309916324f890aed3c972825c50dc03f59749a79f43674ff7452fbabb837ce45008d36043e5f66a93f3a5f113eb0c0f1fef820eafdab6"
imagedeps="meson ninja"
hostdeps="pkg-config"

build() {
    meson_configure \
        --includedir=share/cshim/include \
        -Dinstall_headers=true

    ninja -j${parallelism}
}

package() {
    DESTDIR="${dest_dir}" ninja install

    post_package_strip
}
